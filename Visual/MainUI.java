/** 
 * Nom: MainUI
 * Version: 2.0
 * Date: 23/04/2021
 * Auteur: Membres de l'équipe 4
 * 
 * Description : Afficher la fenetre principale
 * 
 * Copyright 2021 équipe 4
 */

package Visual;

import java.awt.Color;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

import java.awt.FlowLayout;
import javax.swing.*;
//import javax.swing.border.*;
import Code.Controleur;
import Code.EtatRoute;
import Code.Route;
import exception.NoeudInexistantException;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.io.*;
import javax.imageio.*;

public class MainUI extends JFrame {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	/**
	 * Creates new form
	 */
	public MainUI() {
		super("App");
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
			setContentPane(new JLabel(new ImageIcon(getClass().getClassLoader().getResource("interface.jpg"))));

		
		this.setLayout(new FlowLayout());
		this.setResizable(false);
		this.pack();
		this.setVisible(true);
		initComponents();
	}

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */

	// <editor-fold defaultstate="collapsed" desc="Generated Code">
	private void initComponents() {

		// Contient toutes les positions possible de la voiture
		positionImgVoiture = new HashMap<Character, int[]>() {
			/**
			 * 
			 */
			private static final long serialVersionUID = -1209548773217661700L;

			{
				put('A', new int[] { 20, 210 });
				put('B', new int[] { 180, 40 });
				put('C', new int[] { 390, 30 });
				put('D', new int[] { 540, 210 });
				put('E', new int[] { 390, 410 });
				put('F', new int[] { 180, 410 });
				put('G', new int[] { 180, 210 });
				put('H', new int[] { 400, 210 });
			}
		};

		distParc = new JLabel();
		Debuter = new JLabel();
		reinitialiser = new JLabel();
		jTextField1 = new JTextField();
		jTextField2 = new JTextField();
		GH = new JLabel();
		HD = new JLabel();
		CD = new JLabel();
		BC = new JLabel();
		BG = new JLabel();
		CH = new JLabel();
		AG = new JLabel();
		AB = new JLabel();
		FE = new JLabel();
		AF = new JLabel();
		GF = new JLabel();
		HE = new JLabel();
		ED = new JLabel();
		nextStep = new JLabel();
		face_BG = new JLabel();
		face_AG = new JLabel();
		face_AG1 = new JLabel();
		face_BG1 = new JLabel();
		face_AB = new JLabel();
		face_AB1 = new JLabel();
		face_AF1 = new JLabel();
		face_AF = new JLabel();
		face_BC = new JLabel();
		face_BC1 = new JLabel();
		face_GH1 = new JLabel();
		face_GH = new JLabel();
		face_CD = new JLabel();
		face_CD1 = new JLabel();
		face_HD1 = new JLabel();
		face_HD = new JLabel();
		face_FE1 = new JLabel();
		face_FE = new JLabel();
		face_CH1 = new JLabel();
		face_ED1 = new JLabel();
		face_ED = new JLabel();
		face_CH = new JLabel();
		face_HE = new JLabel();
		face_HE1 = new JLabel();
		face_GF = new JLabel();
		face_GF1 = new JLabel();
		carDessin = new JLabel();

		signface_BG = new JLabel();
		signface_AG = new JLabel();
		signface_AG1 = new JLabel();
		signface_BG1 = new JLabel();
		signface_AB = new JLabel();
		signface_AB1 = new JLabel();
		signface_AF1 = new JLabel();
		signface_AF = new JLabel();
		signface_BC = new JLabel();
		signface_BC1 = new JLabel();
		signface_GH1 = new JLabel();
		signface_GH = new JLabel();
		signface_CD = new JLabel();
		signface_CD1 = new JLabel();
		signface_HD1 = new JLabel();
		signface_HD = new JLabel();
		signface_FE1 = new JLabel();
		signface_FE = new JLabel();
		signface_CH1 = new JLabel();
		signface_ED1 = new JLabel();
		signface_ED = new JLabel();
		signface_CH = new JLabel();
		signface_HE = new JLabel();
		signface_HE1 = new JLabel();
		signface_GF = new JLabel();
		signface_GF1 = new JLabel();

		listeFaceRoute = new JLabel[] { face_AB1, face_AG, face_AF, face_AB, face_BC, face_BG, face_BC1, face_CH,
				face_CD, face_CD1, face_HD1, face_ED, face_FE1, face_HE1, face_ED1, face_AF1, face_GF1, face_FE,
				face_AG1, face_BG1, face_GF, face_GH, face_CH1, face_HD, face_HE, face_GH1 };

		listeSignFaceRoute = new JLabel[] { signface_AB1, signface_AG, signface_AF, signface_AB, signface_BC,
				signface_BG, signface_BC1, signface_CH, signface_CD, signface_CD1, signface_HD1, signface_ED,
				signface_FE1, signface_HE1, signface_ED1, signface_AF1, signface_GF1, signface_FE, signface_AG1,
				signface_BG1, signface_GF, signface_GH, signface_CH1, signface_HD, signface_HE, signface_GH1 };

		setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
		getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

		distParc.setHorizontalAlignment(SwingConstants.CENTER);
		distParc.setForeground(Color.white);
		distParc.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
		distParc.setHorizontalTextPosition(SwingConstants.CENTER);

		getContentPane().add(distParc, new org.netbeans.lib.awtextra.AbsoluteConstraints(810, 574, 110, 31));

		Debuter.setHorizontalAlignment(SwingConstants.CENTER);
		Debuter.setText("Debuter");
		Debuter.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
		Debuter.setHorizontalTextPosition(SwingConstants.CENTER);
		
		Debuter.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				DebuterMouseClicked(evt);
			}
		});
		getContentPane().add(Debuter, new org.netbeans.lib.awtextra.AbsoluteConstraints(671, 193, 110, 31));

		reinitialiser.setHorizontalAlignment(SwingConstants.CENTER);
		reinitialiser.setText("Reinitialiser");
		reinitialiser.setHorizontalTextPosition(SwingConstants.CENTER);
		
		reinitialiser.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				reinitialiserMouseClicked(evt);
			}
		});
		getContentPane().add(reinitialiser, new org.netbeans.lib.awtextra.AbsoluteConstraints(811, 193, 110, 31));

		jTextField1.setColumns(1);
		jTextField1.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				jTextField1ActionPerformed(evt);
			}
		});
		getContentPane().add(jTextField1, new org.netbeans.lib.awtextra.AbsoluteConstraints(720, 130, 36, -1));

		jTextField2.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				jTextField2ActionPerformed(evt);
			}
		});
		getContentPane().add(jTextField2, new org.netbeans.lib.awtextra.AbsoluteConstraints(840, 130, 36, -1));

		GH.setForeground(new java.awt.Color(255, 255, 255));
		GH.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_GH.png"))); // NOI18N
		getContentPane().add(GH, new org.netbeans.lib.awtextra.AbsoluteConstraints(760, 434, -1, 20));

		HD.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_HD.png"))); // NOI18N
		getContentPane().add(HD, new org.netbeans.lib.awtextra.AbsoluteConstraints(856, 440, -1, 10));

		CD.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_CD.png"))); // NOI18N
		getContentPane().add(CD, new org.netbeans.lib.awtextra.AbsoluteConstraints(847, 363, -1, 75));

		BC.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_BC.png"))); // NOI18N
		getContentPane().add(BC, new org.netbeans.lib.awtextra.AbsoluteConstraints(760, 357, -1, 10));

		CH.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_CH.png"))); // NOI18N
		getContentPane().add(CH, new org.netbeans.lib.awtextra.AbsoluteConstraints(840, 370, -1, -1));

		BG.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_BG.png"))); // NOI18N
		getContentPane().add(BG, new org.netbeans.lib.awtextra.AbsoluteConstraints(743, 368, -1, -1));

		AG.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_AG.png"))); // NOI18N
		getContentPane().add(AG, new org.netbeans.lib.awtextra.AbsoluteConstraints(684, 437, -1, -1));

		AB.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_AB.png"))); // NOI18N
		getContentPane().add(AB, new org.netbeans.lib.awtextra.AbsoluteConstraints(672, 360, -1, -1));

		FE.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_FE.png"))); // NOI18N
		getContentPane().add(FE, new org.netbeans.lib.awtextra.AbsoluteConstraints(760, 535, -1, -1));

		AF.setHorizontalAlignment(SwingConstants.RIGHT);
		AF.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_AF.png"))); // NOI18N
		getContentPane().add(AF, new org.netbeans.lib.awtextra.AbsoluteConstraints(638, 448, 110, -1));

		GF.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_GF.png"))); // NOI18N
		getContentPane().add(GF, new org.netbeans.lib.awtextra.AbsoluteConstraints(739, 449, -1, -1));

		HE.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_HE.png"))); // NOI18N
		getContentPane().add(HE, new org.netbeans.lib.awtextra.AbsoluteConstraints(838, 450, -1, -1));

		ED.setHorizontalAlignment(SwingConstants.RIGHT);
		ED.setIcon(new ImageIcon(getClass().getClassLoader().getResource("gps_ED.png"))); // NOI18N
		getContentPane().add(ED, new org.netbeans.lib.awtextra.AbsoluteConstraints(832, 438, 90, -1));

		nextStep.setHorizontalAlignment(SwingConstants.CENTER);
		nextStep.setText("Avancer");
		
		nextStep.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				nextStepMouseClicked(evt);
			}
		});
		getContentPane().add(nextStep, new org.netbeans.lib.awtextra.AbsoluteConstraints(740, 250, 110, 30));

		face_BG.setIcon(new ImageIcon(getClass().getClassLoader().getResource("BG.png"))); // NOI18N
		getContentPane().add(face_BG, new org.netbeans.lib.awtextra.AbsoluteConstraints(203, 107, -1, -1));

		face_AG.setIcon(new ImageIcon(getClass().getClassLoader().getResource("AG.png"))); // NOI18N
		getContentPane().add(face_AG, new org.netbeans.lib.awtextra.AbsoluteConstraints(62, 257, 130, -1));

		face_AG1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("AG1.png"))); // NOI18N
		getContentPane().add(face_AG1, new org.netbeans.lib.awtextra.AbsoluteConstraints(78, 247, -1, -1));

		face_BG1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("BG1.png"))); // NOI18N
		getContentPane().add(face_BG1, new org.netbeans.lib.awtextra.AbsoluteConstraints(215, 100, -1, -1));

		face_AB.setIcon(new ImageIcon(getClass().getClassLoader().getResource("AB.png"))); // NOI18N
		getContentPane().add(face_AB, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 88, 150, 150));

		face_AB1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("AB1.png"))); // NOI18N
		getContentPane().add(face_AB1, new org.netbeans.lib.awtextra.AbsoluteConstraints(62, 79, 160, 170));

		face_AF1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("AF1.png"))); // NOI18N
		getContentPane().add(face_AF1, new org.netbeans.lib.awtextra.AbsoluteConstraints(53, 268, -1, -1));

		face_AF.setIcon(new ImageIcon(getClass().getClassLoader().getResource("AF.png"))); // NOI18N
		getContentPane().add(face_AF, new org.netbeans.lib.awtextra.AbsoluteConstraints(41, 272, -1, -1));

		face_BC.setIcon(new ImageIcon(getClass().getClassLoader().getResource("BC.png"))); // NOI18N
		getContentPane().add(face_BC, new org.netbeans.lib.awtextra.AbsoluteConstraints(239, 80, -1, -1));

		face_BC1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("BC1.png"))); // NOI18N
		getContentPane().add(face_BC1, new org.netbeans.lib.awtextra.AbsoluteConstraints(238, 65, -1, 20));

		face_GH1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("GH1.png"))); // NOI18N
		getContentPane().add(face_GH1, new org.netbeans.lib.awtextra.AbsoluteConstraints(239, 246, -1, -1));

		face_GH.setIcon(new ImageIcon(getClass().getClassLoader().getResource("GH.png"))); // NOI18N
		getContentPane().add(face_GH, new org.netbeans.lib.awtextra.AbsoluteConstraints(239, 258, -1, -1));

		face_CD.setIcon(new ImageIcon(getClass().getClassLoader().getResource("CD.png"))); // NOI18N
		getContentPane().add(face_CD, new org.netbeans.lib.awtextra.AbsoluteConstraints(434, 92, -1, -1));

		face_CD1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("CD1.png"))); // NOI18N
		getContentPane().add(face_CD1, new org.netbeans.lib.awtextra.AbsoluteConstraints(445, 84, -1, -1));

		face_HD1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("HD1.png"))); // NOI18N
		getContentPane().add(face_HD1, new org.netbeans.lib.awtextra.AbsoluteConstraints(456, 241, -1, 20));

		face_HD.setIcon(new ImageIcon(getClass().getClassLoader().getResource("HD.png"))); // NOI18N
		getContentPane().add(face_HD, new org.netbeans.lib.awtextra.AbsoluteConstraints(452, 254, -1, 20));

		face_FE1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("FE1.png"))); // NOI18N
		getContentPane().add(face_FE1, new org.netbeans.lib.awtextra.AbsoluteConstraints(238, 451, -1, -1));

		face_FE.setIcon(new ImageIcon(getClass().getClassLoader().getResource("FE.png"))); // NOI18N
		getContentPane().add(face_FE, new org.netbeans.lib.awtextra.AbsoluteConstraints(239, 461, -1, 20));

		face_CH1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("CH1.png"))); // NOI18N
		getContentPane().add(face_CH1, new org.netbeans.lib.awtextra.AbsoluteConstraints(430, 101, -1, -1));

		face_ED1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("DE1.png"))); // NOI18N
		getContentPane().add(face_ED1, new org.netbeans.lib.awtextra.AbsoluteConstraints(443, 244, -1, -1));

		face_ED.setIcon(new ImageIcon(getClass().getClassLoader().getResource("DE.png"))); // NOI18N
		getContentPane().add(face_ED, new org.netbeans.lib.awtextra.AbsoluteConstraints(432, 236, -1, -1));

		face_CH.setIcon(new ImageIcon(getClass().getClassLoader().getResource("CH.png"))); // NOI18N
		getContentPane().add(face_CH, new org.netbeans.lib.awtextra.AbsoluteConstraints(417, 101, 60, -1));

		face_HE.setIcon(new ImageIcon(getClass().getClassLoader().getResource("HE.png"))); // NOI18N
		getContentPane().add(face_HE, new org.netbeans.lib.awtextra.AbsoluteConstraints(414, 276, -1, -1));

		face_HE1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("HE1.png"))); // NOI18N
		getContentPane().add(face_HE1, new org.netbeans.lib.awtextra.AbsoluteConstraints(428, 275, -1, -1));

		face_GF.setIcon(new ImageIcon(getClass().getClassLoader().getResource("GF.png"))); // NOI18N
		getContentPane().add(face_GF, new org.netbeans.lib.awtextra.AbsoluteConstraints(199, 276, -1, -1));

		face_GF1.setIcon(new ImageIcon(getClass().getClassLoader().getResource("GF1.png"))); // NOI18N
		getContentPane().add(face_GF1, new org.netbeans.lib.awtextra.AbsoluteConstraints(213, 274, -1, -1));

		getContentPane().add(signface_BG, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 150, -1, -1));

		getContentPane().add(signface_AG, new org.netbeans.lib.awtextra.AbsoluteConstraints(122, 275, -1, -1));

		getContentPane().add(signface_AG1, new org.netbeans.lib.awtextra.AbsoluteConstraints(122, 200, -1, -1));

		getContentPane().add(signface_BG1, new org.netbeans.lib.awtextra.AbsoluteConstraints(225, 150, -1, -1));

		getContentPane().add(signface_AB, new org.netbeans.lib.awtextra.AbsoluteConstraints(62, 129, -1, -1));

		getContentPane().add(signface_AB1, new org.netbeans.lib.awtextra.AbsoluteConstraints(142, 150, -1, -1));

		getContentPane().add(signface_AF1, new org.netbeans.lib.awtextra.AbsoluteConstraints(122, 314, -1, -1));

		getContentPane().add(signface_AF, new org.netbeans.lib.awtextra.AbsoluteConstraints(53, 314, -1, -1));

		getContentPane().add(signface_BC, new org.netbeans.lib.awtextra.AbsoluteConstraints(288, 100, -1, -1));

		getContentPane().add(signface_BC1, new org.netbeans.lib.awtextra.AbsoluteConstraints(288, 25, -1, -1));

		getContentPane().add(signface_GH1, new org.netbeans.lib.awtextra.AbsoluteConstraints(288, 200, -1, -1));

		getContentPane().add(signface_GH, new org.netbeans.lib.awtextra.AbsoluteConstraints(288, 275, -1, -1));

		getContentPane().add(signface_CD, new org.netbeans.lib.awtextra.AbsoluteConstraints(484, 170, -1, -1));

		getContentPane().add(signface_CD1, new org.netbeans.lib.awtextra.AbsoluteConstraints(515, 124, -1, -1));

		getContentPane().add(signface_HD1, new org.netbeans.lib.awtextra.AbsoluteConstraints(466, 200, -1, -1));

		getContentPane().add(signface_HD, new org.netbeans.lib.awtextra.AbsoluteConstraints(466, 275, -1, -1));

		getContentPane().add(signface_FE1, new org.netbeans.lib.awtextra.AbsoluteConstraints(288, 401, -1, -1));

		getContentPane().add(signface_FE, new org.netbeans.lib.awtextra.AbsoluteConstraints(288, 481, -1, -1));

		getContentPane().add(signface_CH1, new org.netbeans.lib.awtextra.AbsoluteConstraints(445, 150, -1, -1));

		getContentPane().add(signface_ED1, new org.netbeans.lib.awtextra.AbsoluteConstraints(520, 380, -1, -1));

		getContentPane().add(signface_ED, new org.netbeans.lib.awtextra.AbsoluteConstraints(490, 304, -1, -1));

		getContentPane().add(signface_CH, new org.netbeans.lib.awtextra.AbsoluteConstraints(360 , 150, -1, -1));

		getContentPane().add(signface_HE, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 316, -1, -1));

		getContentPane().add(signface_HE1, new org.netbeans.lib.awtextra.AbsoluteConstraints(445, 316, -1, -1));

		getContentPane().add(signface_GF, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 314, -1, -1));

		getContentPane().add(signface_GF1, new org.netbeans.lib.awtextra.AbsoluteConstraints(225, 314, -1, -1));

		carDessin.setIcon(new ImageIcon(getClass().getClassLoader().getResource("mcqueen.png"))); // NOI18N
		getContentPane().add(carDessin, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 210, 70, 80));
		
		
		clearTraffic();
		ClearItineraire();

		control = new Controleur();
		pack();
	}// </editor-fold>

	/**
	 * Permet de convertir le noeud de caractÃ¨re en nombre
	 * 
	 * @param c le noeud sous forme de caracteres
	 * @return le noeud sous forme de nombre
	 * @return -1 si le noeud n'existe pas
	 */
	private int conversionNoeudEntier(char c) {
		if (c >= 'A' && c <= 'H') {
			return c - 65; // Enlever le code ASCII du caractere
		}
		return -1;
	}

	/**
	 * Permet de convertir le noeud de nombre en caractere
	 * 
	 * @param b le noeud sous forme de nombre
	 * @return le noeud sous forme de caracteres
	 * @return '*' si le noeud n'existe pas
	 */
	private char conversionNoeudCaractere(int b) {
		if (b >= 0 && b <= 7) {
			return (char) (b + 65); // envoye le code ASCII du caractere
		}
		return '*';
	}

	/**
	 * Permet de dessiner une route sur le chemin sur le GPS
	 * 
	 * @param debut le premier noeud de l'itineraire
	 * @param fin   le dernier noeud de l'itineraire
	 */
	private void dessinerChemin(char debut, char fin) { // Pour GPS

		if (debut == 'A' && fin == 'B' || debut == 'B' && fin == 'A') {
			AB.setVisible(true);
		}
		if (debut == 'A' && fin == 'G' || debut == 'G' && fin == 'A') {
			AG.setVisible(true);
		}
		if (debut == 'A' && fin == 'F' || debut == 'F' && fin == 'A') {
			AF.setVisible(true);
		}
		if (debut == 'B' && fin == 'C' || debut == 'C' && fin == 'B') {
			BC.setVisible(true);
		}
		if (debut == 'G' && fin == 'H' || debut == 'H' && fin == 'G') {
			GH.setVisible(true);
		}
		if (debut == 'F' && fin == 'E' || debut == 'E' && fin == 'F') {
			FE.setVisible(true);
		}
		if (debut == 'C' && fin == 'D' || debut == 'D' && fin == 'C') {
			CD.setVisible(true);
		}
		if (debut == 'H' && fin == 'D' || debut == 'D' && fin == 'H') {
			HD.setVisible(true);
		}
		if (debut == 'E' && fin == 'D' || debut == 'D' && fin == 'E') {
			ED.setVisible(true);
		}
		if (debut == 'B' && fin == 'G' || debut == 'G' && fin == 'B') {
			BG.setVisible(true);
		}
		if (debut == 'G' && fin == 'F' || debut == 'F' && fin == 'G') {
			GF.setVisible(true);
		}
		if (debut == 'C' && fin == 'H' || debut == 'H' && fin == 'C') {
			CH.setVisible(true);
		}
		if (debut == 'H' && fin == 'E' || debut == 'E' && fin == 'H') {
			HE.setVisible(true);
		}

	}

	/**
	 * Permet d'afficher la distance parcourue
	 */
	private void calculDistParc() {

		double dstdoble = control.getVoitureDistance();
		String dst = String.valueOf(dstdoble);

		distParc.setText(dst);
		distParc.setVisible(true);

	}

	/**
	 * Permet de dessiner le GPS
	 */
	private void dessinerItineraire() {
		ArrayList<Route> itineraire = control.getItineraire();
		for (int i = 0; i < itineraire.size(); i++) {
			dessinerChemin(conversionNoeudCaractere(itineraire.get(i).getNoeud(0)),
					conversionNoeudCaractere(itineraire.get(i).getNoeud(1)));
		}
	}

	/**
	 * Permet d'effacer le GPS sur la carte
	 */
	public void ClearItineraire() {
		GH.setVisible(false);
		HD.setVisible(false);
		CD.setVisible(false);
		BC.setVisible(false);
		BG.setVisible(false);
		CH.setVisible(false);
		AG.setVisible(false);
		AB.setVisible(false);
		FE.setVisible(false);
		AF.setVisible(false);
		GF.setVisible(false);
		HE.setVisible(false);
		ED.setVisible(false);
		distParc.setVisible(false);
	}

	/**
	 * Permet d'effacer le trafic sur la carte
	 */
	public void clearTraffic() {
		face_BG.setVisible(false);
		face_AG.setVisible(false);
		face_AG1.setVisible(false);
		face_BG1.setVisible(false);
		face_AB.setVisible(false);
		face_AB1.setVisible(false);
		face_AF1.setVisible(false);
		face_AF.setVisible(false);
		face_BC.setVisible(false);
		face_BC1.setVisible(false);
		face_GH1.setVisible(false);
		face_GH.setVisible(false);
		face_CD.setVisible(false);
		face_CD1.setVisible(false);
		face_HD1.setVisible(false);
		face_HD.setVisible(false);
		face_FE1.setVisible(false);
		face_FE.setVisible(false);
		face_CH1.setVisible(false);
		face_ED1.setVisible(false);
		face_ED.setVisible(false);
		face_CH.setVisible(false);
		face_HE.setVisible(false);
		face_HE1.setVisible(false);
		face_GF.setVisible(false);
		face_GF1.setVisible(false);
		carDessin.setVisible(false);
		signface_BG.setVisible(false);
		signface_AG.setVisible(false);
		signface_AG1.setVisible(false);
		signface_BG1.setVisible(false);
		signface_AB.setVisible(false);
		signface_AB1.setVisible(false);
		signface_AF1.setVisible(false);
		signface_AF.setVisible(false);
		signface_BC.setVisible(false);
		signface_BC1.setVisible(false);
		signface_GH1.setVisible(false);
		signface_GH.setVisible(false);
		signface_CD.setVisible(false);
		signface_CD1.setVisible(false);
		signface_HD1.setVisible(false);
		signface_HD.setVisible(false);
		signface_FE1.setVisible(false);
		signface_FE.setVisible(false);
		signface_CH1.setVisible(false);
		signface_ED1.setVisible(false);
		signface_ED.setVisible(false);
		signface_CH.setVisible(false);
		signface_HE.setVisible(false);
		signface_HE1.setVisible(false);
		signface_GF.setVisible(false);
		signface_GF1.setVisible(false);
		
		
	}

	/**
	 * Permet de dessiner le traffic sur la carte
	 * 
	 * @param listeEtat l'etat de chaque route
	 */
	public void dessinerTraffic(EtatRoute[] listeEtat) { // Pour Interface
		for (int i = 0; i < listeFaceRoute.length; i++) {
			System.out.println("Route " + i + " : " + listeEtat[i]);
			switch (listeEtat[i]) {
			case FLUIDE:
				listeFaceRoute[i].setVisible(false);
				break;
			case CONGESTION:
				listeFaceRoute[i].setVisible(true);
				listeSignFaceRoute[i].setIcon(new ImageIcon(getClass().getClassLoader().getResource("Congestion.png")));
				listeSignFaceRoute[i].setVisible(true);
				break;
			case ACCIDENT:
				listeFaceRoute[i].setVisible(true);
				listeSignFaceRoute[i].setIcon(new ImageIcon(getClass().getClassLoader().getResource("Accident.png")));
				listeSignFaceRoute[i].setVisible(true);
				break;

			}
		}

	}

	/**
	 * Permet d'afficher la voiture sur son noeud
	 */
	private void afficherVoiture() {

		char noeudActuel = conversionNoeudCaractere(control.getPositionVoiture());
		getContentPane().add(carDessin, new org.netbeans.lib.awtextra.AbsoluteConstraints(
				positionImgVoiture.get(noeudActuel)[0], positionImgVoiture.get(noeudActuel)[1], 70, 80));
		carDessin.setVisible(true);

	}

	/**
	 * Permet d'afficher une fenetre d'erreur
	 */
	public void afficherErreur(String msg) {
		JFrame frame = new JFrame();
		JOptionPane.showMessageDialog(frame, msg);
	}

	/**
	 * Bouton pour commencer le chemin de la voiture
	 * 
	 * @param evt
	 */
	private void DebuterMouseClicked(java.awt.event.MouseEvent evt) {
		try {
			Depart = jTextField1.getText().toUpperCase().charAt(0); // Recuperer les noeuds a l'utilisateur
			Arrive = jTextField2.getText().toUpperCase().charAt(0);

			control.demarrer(conversionNoeudEntier(Depart), conversionNoeudEntier(Arrive));
			clearTraffic();
			ClearItineraire();
			dessinerTraffic(control.getEtatRoutes());
			dessinerItineraire();
			calculDistParc();
			afficherVoiture();

		} catch (StringIndexOutOfBoundsException | NullPointerException | NoeudInexistantException e) {
			afficherErreur("Veuillez Rentrer des Valeurs Valides !!!");
		}

	}

	/**
	 * Bouton pour reinitialiser toute la fenetre
	 * 
	 * @param evt
	 */
	private void reinitialiserMouseClicked(java.awt.event.MouseEvent evt) {

		ClearItineraire();
		clearTraffic();
		jTextField1.setText("");
		jTextField2.setText("");
		control.arreter(); // Enlever la voiture
	}

	private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {
		Depart = jTextField1.getText().charAt(0);

	}

	private void jTextField2ActionPerformed(java.awt.event.ActionEvent evt) {
		Arrive = jTextField2.getText().charAt(0);
	}

	/**
	 * Permet d'avancer la voiture
	 * 
	 * @param evt
	 */
	private void nextStepMouseClicked(java.awt.event.MouseEvent evt) {
		try {
			dessinerItineraire();
			if (control.deplacement() == 2) {
				afficherErreur("La voiture a atteint sa destination !");
			} else {
				clearTraffic();
				ClearItineraire();
				dessinerItineraire();
				dessinerTraffic(control.getEtatRoutes());
				calculDistParc();
				afficherVoiture();
			}

		} catch (NullPointerException e) {
			afficherErreur("Pour avancer la voiture, il faut debuter !!");
		}

	}

	/**
	 * @param args the command line arguments
	 */
	public static void main(String[] args) {
		/* Set the Nimbus look and feel */
		// <editor-fold defaultstate="collapsed" desc=" Look and feel setting code
		// (optional) ">
		/*
		 * If Nimbus (introduced in Java SE 6) is not available, stay with the default
		 * look and feel. For details see
		 * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
		 */
		try {
			for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
				if ("Nimbus".equals(info.getName())) {
					UIManager.setLookAndFeel(info.getClassName());
					break;
				}
			}
		} catch (ClassNotFoundException ex) {
			java.util.logging.Logger.getLogger(MainUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
		} catch (InstantiationException ex) {
			java.util.logging.Logger.getLogger(MainUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
		} catch (IllegalAccessException ex) {
			java.util.logging.Logger.getLogger(MainUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
		} catch (UnsupportedLookAndFeelException ex) {
			java.util.logging.Logger.getLogger(MainUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
		}
		// </editor-fold>

		/* Create and display the form */
		java.awt.EventQueue.invokeLater(new Runnable() {
			public void run() {
				new MainUI().setVisible(true);
			}
		});
	}

	Controleur control;
	char Depart;
	char Arrive;
	Map<Character, int[]> positionImgVoiture;
	// Variables declaration - do not modify
	private JLabel AB;
	private JLabel AF;
	private JLabel AG;
	private JLabel BC;
	private JLabel BG;
	private JLabel CD;
	private JLabel CH;
	private JLabel Debuter;
	private JLabel distParc;
	private JLabel ED;
	private JLabel FE;
	private JLabel GF;
	private JLabel GH;
	private JLabel HD;
	private JLabel HE;
	private JLabel reinitialiser;
	private JLabel face_AB;
	private JLabel face_AB1;
	private JLabel face_AF;
	private JLabel face_AF1;
	private JLabel face_AG;
	private JLabel face_AG1;
	private JLabel face_BC;
	private JLabel face_BC1;
	private JLabel face_BG;
	private JLabel face_BG1;
	private JLabel face_CD;
	private JLabel face_CD1;
	private JLabel face_CH;
	private JLabel face_CH1;
	private JLabel face_ED;
	private JLabel face_ED1;
	private JLabel face_FE;
	private JLabel face_FE1;
	private JLabel face_GF;
	private JLabel face_GF1;
	private JLabel face_GH;
	private JLabel face_GH1;
	private JLabel face_HD;
	private JLabel face_HD1;
	private JLabel face_HE;
	private JLabel face_HE1;

	private JLabel signface_AB;
	private JLabel signface_AB1;
	private JLabel signface_AF;
	private JLabel signface_AF1;
	private JLabel signface_AG;
	private JLabel signface_AG1;
	private JLabel signface_BC;
	private JLabel signface_BC1;
	private JLabel signface_BG;
	private JLabel signface_BG1;
	private JLabel signface_CD;
	private JLabel signface_CD1;
	private JLabel signface_CH;
	private JLabel signface_CH1;
	private JLabel signface_ED;
	private JLabel signface_ED1;
	private JLabel signface_FE;
	private JLabel signface_FE1;
	private JLabel signface_GF;
	private JLabel signface_GF1;
	private JLabel signface_GH;
	private JLabel signface_GH1;
	private JLabel signface_HD;
	private JLabel signface_HD1;
	private JLabel signface_HE;
	private JLabel signface_HE1;

	private JTextField jTextField1;
	private JTextField jTextField2;
	private JLabel nextStep;
	private JLabel carDessin;
	JLabel[] listeFaceRoute;
	JLabel[] listeSignFaceRoute;

	// End of variables declaration
}
